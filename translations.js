// i18n for A la Fresh - Web Components + event-driven engine

const translations = {
    es: {
        // Document
        doc_title: "A la Fresh - Barrio Antioquia",
        doc_description: "A la Fresh - Fresas frescas y deliciosas en el Barrio Antioquia, MedellÃ­n.",

        // Navigation
        nav_inicio: "Inicio",
        nav_productos: "Productos",
        nav_contacto: "Contacto",

        // Hero section
        hero_welcome: "Bienvenidos a",
        hero_title: "A la Fresh",
        hero_subtitle: "Frescura y dulzor en el Barrio Antioquia",
        hero_description:
            "Descubre el sabor autÃ©ntico de nuestras fresas frescas, seleccionadas con amor para brindarte la mejor experiencia. Un rincÃ³n especial donde la tradiciÃ³n y la calidad se encuentran.",
        hero_btn_productos: "Ver Productos",
        hero_btn_visitanos: "VisÃ­tanos",

        // Products section
        products_title: "Nuestras Deliciosas Fresas",
        products_subtitle: "Frescura, dulzor y calidad en cada bocado",

        // Product cards
        product1_title: "Fresas Frescas Premium",
        product1_description:
            "Directamente del campo a tu mesa, con la mÃ¡s alta calidad y frescura. Fresas jugosas y dulces que deleitan el paladar.",
        product1_feature1: "100% Natural",
        product1_feature2: "ğŸšš Entrega RÃ¡pida",

        product2_title: "Delicias con Fresas",
        product2_description:
            "Un ambiente acogedor donde puedes disfrutar de nuestras fresas con crema, chocolate, obleas y muchas combinaciones deliciosas.",
        product2_feature1: "ğŸ« Con Chocolate",
        product2_feature2: "ğŸ¥› Con Crema",

        product3_title: "Combinaciones Especiales",
        product3_description:
            "Servicio personalizado con el cariÃ±o que nos caracteriza. Crea tu propia combinaciÃ³n de fresas con tus toppings favoritos.",
        product3_feature1: "â­ Calidad Premium",
        product3_feature2: "ğŸ‘¥ Servicio Personal",

        // Features
        feature1_title: "Calidad Garantizada",
        feature1_description: "Seleccionamos cada producto con esmero",
        feature2_title: "Frescura Garantizada",
        feature2_description:
            "Seleccionamos cada fresa con esmero para ofrecerte lo mejor",
        feature3_title: "Barrio Antioquia",
        feature3_description: "Orgullosamente parte de la comunidad",
        feature4_title: "Dulzura Natural",
        feature4_description: "Cada fresa viene con su dulzor natural perfecto",

        // Contact section
        contact_accent: "EncuÃ©ntranos en",
        contact_title: "Barrio Antioquia",
        contact_description:
            "Te esperamos con los brazos abiertos en nuestro acogedor local. Ven a disfrutar de nuestras deliciosas fresas con tus combinaciones favoritas.",

        contact_location_title: "UbicaciÃ³n",
        contact_location_text: "Barrio Antioquia<br>MedellÃ­n, Colombia",
        contact_hours_title: "Horarios",
        contact_hours_text:
            "Lunes a SÃ¡bado: 7:00 AM - 7:00 PM<br>Domingo: 8:00 AM - 5:00 PM",
        contact_phone_title: "Contacto",
        contact_phone_text:
            "WhatsApp: +57 XXX XXX XXXX<br>Â¡Pregunta por nuestros productos!",

        // Footer
        footer_text: "Con dulzor desde el Barrio Antioquia ğŸ“",

        // Placeholders
        placeholder_product:
            "AquÃ­ irÃ­an fotos de productos especÃ­ficos, fresas con obleas, fresas con crema, o el Ã¡rea de atenciÃ³n al cliente",
        placeholder_store: "Foto del frente del local o entrada principal",
        placeholder_team: "Foto del equipo o clientes satisfechos",

        // Image alts
        hero_img_alt: "A la Fresh - Imagen Oficial",
        product1_img_alt: "Productos frescos",
        product2_img_alt: "Ambiente del local",

        // Social media
        social_whatsapp: "Contactar por WhatsApp",
        social_instagram: "Seguir en Instagram",
        social_facebook: "Seguir en Facebook",

        // Language names
        lang_spanish: "EspaÃ±ol",
        lang_english: "English",
        lang_chinese: "ä¸­æ–‡",
        lang_french: "FranÃ§ais",
    },

    en: {
        // Document
        doc_title: "A la Fresh - Antioquia Neighborhood",
        doc_description:
            "A la Fresh - Fresh and delicious strawberries in Antioquia Neighborhood, MedellÃ­n.",

        // Navigation
        nav_inicio: "Home",
        nav_productos: "Products",
        nav_contacto: "Contact",

        // Hero section
        hero_welcome: "Welcome to",
        hero_title: "A la Fresh",
        hero_subtitle: "Freshness and sweetness in Antioquia Neighborhood",
        hero_description:
            "Discover the authentic taste of our fresh strawberries, selected with love to give you the best experience. A special corner where tradition and quality meet.",
        hero_btn_productos: "View Products",
        hero_btn_visitanos: "Visit Us",

        // Products section
        products_title: "Our Delicious Strawberries",
        products_subtitle: "Freshness, sweetness and quality in every bite",

        // Product cards
        product1_title: "Premium Fresh Strawberries",
        product1_description:
            "Directly from the field to your table, with the highest quality and freshness. Juicy and sweet strawberries that delight the palate.",
        product1_feature1: "100% Natural",
        product1_feature2: "ğŸšš Fast Delivery",

        product2_title: "Strawberry Delights",
        product2_description:
            "A cozy atmosphere where you can enjoy our strawberries with cream, chocolate, wafers and many delicious combinations.",
        product2_feature1: "ğŸ« With Chocolate",
        product2_feature2: "ğŸ¥› With Cream",

        product3_title: "Special Combinations",
        product3_description:
            "Personalized service with the care that characterizes us. Create your own combination of strawberries with your favorite toppings.",
        product3_feature1: "â­ Premium Quality",
        product3_feature2: "ğŸ‘¥ Personal Service",

        // Features
        feature1_title: "Guaranteed Quality",
        feature1_description: "We select each product with care",
        feature2_title: "Guaranteed Freshness",
        feature2_description:
            "We select each strawberry with care to offer you the best",
        feature3_title: "Antioquia Neighborhood",
        feature3_description: "Proudly part of the community",
        feature4_title: "Natural Sweetness",
        feature4_description: "Each strawberry comes with its perfect natural sweetness",

        // Contact section
        contact_accent: "Find us in",
        contact_title: "Antioquia Neighborhood",
        contact_description:
            "We welcome you with open arms to our cozy place. Come enjoy our delicious strawberries with your favorite combinations.",

        contact_location_title: "Location",
        contact_location_text: "Antioquia Neighborhood<br>MedellÃ­n, Colombia",
        contact_hours_title: "Hours",
        contact_hours_text:
            "Monday to Saturday: 7:00 AM - 7:00 PM<br>Sunday: 8:00 AM - 5:00 PM",
        contact_phone_title: "Contact",
        contact_phone_text:
            "WhatsApp: +57 XXX XXX XXXX<br>Ask about our products!",

        // Footer
        footer_text: "With sweetness from Antioquia Neighborhood ğŸ“",

        // Placeholders
        placeholder_product:
            "Here would go photos of specific products, strawberries with wafers, strawberries with cream, or the customer service area",
        placeholder_store: "Photo of the store front or main entrance",
        placeholder_team: "Photo of the team or satisfied customers",

        // Image alts
        hero_img_alt: "A la Fresh - Official Image",
        product1_img_alt: "Fresh products",
        product2_img_alt: "Store environment",

        // Social media
        social_whatsapp: "Contact via WhatsApp",
        social_instagram: "Follow on Instagram",
        social_facebook: "Follow on Facebook",

        // Language names
        lang_spanish: "Spanish",
        lang_english: "English",
        lang_chinese: "Chinese",
        lang_french: "French",
    },

    zh: {
        // Document
        doc_title: "æ–°é²œè‰è“åº— - å®‰è’‚å¥¥åŸºäºšç¤¾åŒº",
        doc_description: "æ–°é²œè‰è“åº— - éº¦å¾·æ—å®‰è’‚å¥¥åŸºäºšç¤¾åŒºçš„æ–°é²œç¾å‘³è‰è“ã€‚",

        // Navigation
        nav_inicio: "é¦–é¡µ",
        nav_productos: "äº§å“",
        nav_contacto: "è”ç³»æˆ‘ä»¬",

        // Hero section
        hero_welcome: "æ¬¢è¿æ¥åˆ°",
        hero_title: "æ–°é²œè‰è“åº—",
        hero_subtitle: "å®‰è’‚å¥¥åŸºäºšç¤¾åŒºçš„æ–°é²œä¸ç”œèœœ",
        hero_description:
            "æ¢ç´¢æˆ‘ä»¬æ–°é²œè‰è“çš„æ­£å®—å‘³é“ï¼Œç²¾å¿ƒæŒ‘é€‰ä¸ºæ‚¨æä¾›æœ€ä½³ä½“éªŒã€‚è¿™æ˜¯ä¸€ä¸ªä¼ ç»Ÿä¸å“è´¨ç›¸é‡çš„ç‰¹æ®Šè§’è½ã€‚",
        hero_btn_productos: "æŸ¥çœ‹äº§å“",
        hero_btn_visitanos: "æ‹œè®¿æˆ‘ä»¬",

        // Products section
        products_title: "æˆ‘ä»¬ç¾å‘³çš„è‰è“",
        products_subtitle: "æ¯ä¸€å£éƒ½æœ‰æ–°é²œã€ç”œèœœå’Œå“è´¨",

        // Product cards
        product1_title: "ä¼˜è´¨æ–°é²œè‰è“",
        product1_description:
            "ä»ç”°é—´ç›´æ¥åˆ°æ‚¨çš„é¤æ¡Œï¼Œå…·æœ‰æœ€é«˜çš„å“è´¨å’Œæ–°é²œåº¦ã€‚å¤šæ±ç”œç¾çš„è‰è“ä»¤äººæ„‰æ‚¦ã€‚",
        product1_feature1: "100% å¤©ç„¶",
        product1_feature2: "ğŸšš å¿«é€Ÿé…é€",

        product2_title: "è‰è“ç¾å‘³",
        product2_description:
            "èˆ’é€‚çš„ç¯å¢ƒï¼Œæ‚¨å¯ä»¥äº«å—æˆ‘ä»¬çš„è‰è“é…å¥¶æ²¹ã€å·§å…‹åŠ›ã€å¨åŒ–é¥¼å’Œè®¸å¤šç¾å‘³çš„ç»„åˆã€‚",
        product2_feature1: "ğŸ« é…å·§å…‹åŠ›",
        product2_feature2: "ğŸ¥› é…å¥¶æ²¹",

        product3_title: "ç‰¹æ®Šç»„åˆ",
        product3_description:
            "ä»¥æˆ‘ä»¬ç‰¹æœ‰çš„å…³æ€€æä¾›ä¸ªæ€§åŒ–æœåŠ¡ã€‚ç”¨æ‚¨æœ€å–œæ¬¢çš„é…æ–™åˆ›é€ æ‚¨è‡ªå·±çš„è‰è“ç»„åˆã€‚",
        product3_feature1: "â­ ä¼˜è´¨å“è´¨",
        product3_feature2: "ğŸ‘¥ ä¸ªäººæœåŠ¡",

        // Features
        feature1_title: "å“è´¨ä¿è¯",
        feature1_description: "æˆ‘ä»¬ç²¾å¿ƒæŒ‘é€‰æ¯ä¸ªäº§å“",
        feature2_title: "æ–°é²œä¿è¯",
        feature2_description: "æˆ‘ä»¬ç²¾å¿ƒæŒ‘é€‰æ¯é¢—è‰è“ä¸ºæ‚¨æä¾›æœ€å¥½çš„",
        feature3_title: "å®‰è’‚å¥¥åŸºäºšç¤¾åŒº",
        feature3_description: "è‡ªè±ªåœ°æˆä¸ºç¤¾åŒºçš„ä¸€éƒ¨åˆ†",
        feature4_title: "å¤©ç„¶ç”œå‘³",
        feature4_description: "æ¯é¢—è‰è“éƒ½å¸¦æœ‰å®Œç¾çš„å¤©ç„¶ç”œå‘³",

        // Contact section
        contact_accent: "åœ¨è¿™é‡Œæ‰¾åˆ°æˆ‘ä»¬",
        contact_title: "å®‰è’‚å¥¥åŸºäºšç¤¾åŒº",
        contact_description:
            "æˆ‘ä»¬å¼ å¼€åŒè‡‚æ¬¢è¿æ‚¨æ¥åˆ°æˆ‘ä»¬èˆ’é€‚çš„åœ°æ–¹ã€‚æ¥äº«å—æˆ‘ä»¬ç¾å‘³çš„è‰è“é…æ‚¨æœ€å–œæ¬¢çš„ç»„åˆã€‚",

        contact_location_title: "ä½ç½®",
        contact_location_text: "å®‰è’‚å¥¥åŸºäºšç¤¾åŒº<br>éº¦å¾·æ—ï¼Œå“¥ä¼¦æ¯”äºš",
        contact_hours_title: "è¥ä¸šæ—¶é—´",
        contact_hours_text:
            "å‘¨ä¸€è‡³å‘¨å…­ï¼šä¸Šåˆ7:00 - æ™šä¸Š7:00<br>å‘¨æ—¥ï¼šä¸Šåˆ8:00 - ä¸‹åˆ5:00",
        contact_phone_title: "è”ç³»æ–¹å¼",
        contact_phone_text:
            "WhatsApp: +57 XXX XXX XXXX<br>è¯¢é—®æˆ‘ä»¬çš„äº§å“ï¼",

        // Footer
        footer_text: "æ¥è‡ªå®‰è’‚å¥¥åŸºäºšç¤¾åŒºçš„ç”œèœœ ğŸ“",

        // Placeholders
        placeholder_product:
            "è¿™é‡Œä¼šæ”¾ç½®ç‰¹å®šäº§å“çš„ç…§ç‰‡ï¼Œè‰è“é…å¨åŒ–é¥¼ï¼Œè‰è“é…å¥¶æ²¹ï¼Œæˆ–å®¢æœåŒºåŸŸ",
        placeholder_store: "å•†åº—é—¨é¢æˆ–ä¸»å…¥å£çš„ç…§ç‰‡",
        placeholder_team: "å›¢é˜Ÿæˆ–æ»¡æ„å®¢æˆ·çš„ç…§ç‰‡",

        // Image alts
        hero_img_alt: "æ–°é²œè‰è“åº— - å®˜æ–¹å›¾ç‰‡",
        product1_img_alt: "æ–°é²œäº§å“",
        product2_img_alt: "åº—é“ºç¯å¢ƒ",

        // Social media
        social_whatsapp: "é€šè¿‡WhatsAppè”ç³»",
        social_instagram: "åœ¨Instagramä¸Šå…³æ³¨",
        social_facebook: "åœ¨Facebookä¸Šå…³æ³¨",

        // Language names
        lang_spanish: "è¥¿ç­ç‰™è¯­",
        lang_english: "è‹±è¯­",
        lang_chinese: "ä¸­æ–‡",
        lang_french: "æ³•è¯­",
    },

    fr: {
        // Document
        doc_title: "A la Fresh - Quartier Antioquia",
        doc_description:
            "A la Fresh - Fraises fraÃ®ches et dÃ©licieuses dans le quartier Antioquia, MedellÃ­n.",

        // Navigation
        nav_inicio: "Accueil",
        nav_productos: "Produits",
        nav_contacto: "Contact",

        // Hero section
        hero_welcome: "Bienvenue Ã ",
        hero_title: "A la Fresh",
        hero_subtitle: "FraÃ®cheur et douceur dans le quartier Antioquia",
        hero_description:
            "DÃ©couvrez le goÃ»t authentique de nos fraises fraÃ®ches, sÃ©lectionnÃ©es avec amour pour vous offrir la meilleure expÃ©rience. Un coin spÃ©cial oÃ¹ tradition et qualitÃ© se rencontrent.",
        hero_btn_productos: "Voir les Produits",
        hero_btn_visitanos: "Nous Rendre Visite",

        // Products section
        products_title: "Nos DÃ©licieuses Fraises",
        products_subtitle: "FraÃ®cheur, douceur et qualitÃ© Ã  chaque bouchÃ©e",

        // Product cards
        product1_title: "Fraises FraÃ®ches Premium",
        product1_description:
            "Directement du champ Ã  votre table, avec la plus haute qualitÃ© et fraÃ®cheur. Des fraises juteuses et sucrÃ©es qui ravissent le palais.",
        product1_feature1: "100% Naturel",
        product1_feature2: "ğŸšš Livraison Rapide",

        product2_title: "DÃ©lices aux Fraises",
        product2_description:
            "Une atmosphÃ¨re chaleureuse oÃ¹ vous pouvez dÃ©guster nos fraises avec de la crÃ¨me, du chocolat, des gaufrettes et de nombreuses dÃ©licieuses combinaisons.",
        product2_feature1: "ğŸ« Avec Chocolat",
        product2_feature2: "ğŸ¥› Avec CrÃ¨me",

        product3_title: "Combinaisons SpÃ©ciales",
        product3_description:
            "Service personnalisÃ© avec le soin qui nous caractÃ©rise. CrÃ©ez votre propre combinaison de fraises avec vos garnitures prÃ©fÃ©rÃ©es.",
        product3_feature1: "â­ QualitÃ© Premium",
        product3_feature2: "ğŸ‘¥ Service Personnel",

        // Features
        feature1_title: "QualitÃ© Garantie",
        feature1_description: "Nous sÃ©lectionnons chaque produit avec soin",
        feature2_title: "FraÃ®cheur Garantie",
        feature2_description:
            "Nous sÃ©lectionnons chaque fraise avec soin pour vous offrir le meilleur",
        feature3_title: "Quartier Antioquia",
        feature3_description: "FiÃ¨rement partie de la communautÃ©",
        feature4_title: "Douceur Naturelle",
        feature4_description: "Chaque fraise vient avec sa douceur naturelle parfaite",

        // Contact section
        contact_accent: "Trouvez-nous dans",
        contact_title: "Quartier Antioquia",
        contact_description:
            "Nous vous accueillons Ã  bras ouverts dans notre lieu chaleureux. Venez dÃ©guster nos dÃ©licieuses fraises avec vos combinaisons prÃ©fÃ©rÃ©es.",

        contact_location_title: "Emplacement",
        contact_location_text: "Quartier Antioquia<br>MedellÃ­n, Colombie",
        contact_hours_title: "Horaires",
        contact_hours_text:
            "Lundi au Samedi : 7h00 - 19h00<br>Dimanche : 8h00 - 17h00",
        contact_phone_title: "Contact",
        contact_phone_text:
            "WhatsApp: +57 XXX XXX XXXX<br>Demandez pour nos produits !",

        // Footer
        footer_text: "Avec douceur depuis le quartier Antioquia ğŸ“",

        // Placeholders
        placeholder_product:
            "Ici iraient des photos de produits spÃ©cifiques, fraises avec gaufrettes, fraises avec crÃ¨me, ou l'espace service client",
        placeholder_store: "Photo de la devanture du magasin ou de l'entrÃ©e principale",
        placeholder_team: "Photo de l'Ã©quipe ou de clients satisfaits",

        // Image alts
        hero_img_alt: "A la Fresh - Image Officielle",
        product1_img_alt: "Produits frais",
        product2_img_alt: "Ambiance du magasin",

        // Social media
        social_whatsapp: "Contacter via WhatsApp",
        social_instagram: "Suivre sur Instagram",
        social_facebook: "Suivre sur Facebook",

        // Language names
        lang_spanish: "Espagnol",
        lang_english: "Anglais",
        lang_chinese: "Chinois",
        lang_french: "FranÃ§ais",
    },
};

// Event-driven i18n engine + Web Components
let currentLanguage = 'es';

function t(key) {
    const dict = translations[currentLanguage] || translations.es;
    return dict[key] ?? translations.es[key] ?? '';
}

function updateMetaForLang(lang) {
    const d = translations[lang] || translations.es;
    if (d.doc_title) document.title = d.doc_title;
    const metaDesc = document.querySelector('meta[name="description"]');
    if (metaDesc && d.doc_description) metaDesc.setAttribute('content', d.doc_description);
    document.documentElement.setAttribute('lang', lang);
}

function dispatchLangChange(lang) {
    document.dispatchEvent(new CustomEvent('i18n:lang-changed', { detail: { lang } }));
}

class TText extends HTMLElement {
    static get observedAttributes() { return ['key']; }
    connectedCallback() {
        this._onLang = () => this._render();
        document.addEventListener('i18n:lang-changed', this._onLang);
        this._render();
    }
    disconnectedCallback() {
        document.removeEventListener('i18n:lang-changed', this._onLang);
    }
    attributeChangedCallback() { this._render(); }
    _render() {
        const k = this.getAttribute('key');
        if (!k) return;
        const val = t(k);
        if (typeof val === 'string' && val.includes('<')) this.innerHTML = val; else this.textContent = val;
    }
}

class TAttr extends HTMLElement {
    static get observedAttributes() { return ['for', 'attr', 'key']; }
    connectedCallback() {
        this.style.display = 'none';
        this._onLang = () => this._apply();
        document.addEventListener('i18n:lang-changed', this._onLang);
        this._apply();
    }
    disconnectedCallback() {
        document.removeEventListener('i18n:lang-changed', this._onLang);
    }
    attributeChangedCallback() { this._apply(); }
    _apply() {
        const sel = this.getAttribute('for');
        const attr = this.getAttribute('attr');
        const key = this.getAttribute('key');
        if (!sel || !attr || !key) return;
        const el = document.querySelector(sel);
        if (!el) return;
        const val = t(key);
        if (val != null) el.setAttribute(attr, val);
    }
}

customElements.define('t-text', TText);
customElements.define('t-attr', TAttr);

function changeLanguage(lang) {
    try { console.debug('[i18n] changeLanguage ->', lang); } catch {}
    currentLanguage = lang;
    localStorage.setItem('preferredLanguage', lang);
    updateMetaForLang(lang);
    // Update active state in UI
    document.querySelectorAll('.lang-btn').forEach((btn) => btn.classList.remove('active'));
    const activeBtn = document.querySelector(`[data-lang="${lang}"]`);
    if (activeBtn) activeBtn.classList.add('active');
    if (window.updateCurrentLanguageDisplay) window.updateCurrentLanguageDisplay(lang);
    dispatchLangChange(lang);
    // Fallback manual hydration
    hydrateAll();
    const langDropdown = document.querySelector('.lang-dropdown');
    if (langDropdown) langDropdown.classList.remove('active');
}

// Exponer inmediatamente para onclick en HTML, incluso antes de DOMContentLoaded
window.changeLanguage = changeLanguage;

function hydrateAll() {
    // Hidratar <t-text>
    document.querySelectorAll('t-text').forEach((el) => {
        const k = el.getAttribute('key');
        if (!k) return;
        const val = t(k);
        if (typeof val === 'string' && val.includes('<')) el.innerHTML = val; else el.textContent = val;
    });
    // Hidratar <t-attr>
    document.querySelectorAll('t-attr').forEach((el) => {
        const sel = el.getAttribute('for');
        const attr = el.getAttribute('attr');
        const key = el.getAttribute('key');
        if (!sel || !attr || !key) return;
        const target = document.querySelector(sel);
        if (!target) return;
        const val = t(key);
        if (val != null) target.setAttribute(attr, val);
    });

    // Compatibilidad retro: data-translate
    document.querySelectorAll('[data-translate]').forEach((el) => {
        const key = el.getAttribute('data-translate');
        if (!key) return;
        const val = t(key);
        if (val == null) return;
        if (typeof val === 'string' && val.includes('<')) el.innerHTML = val; else el.textContent = val;
    });
    document.querySelectorAll('[data-translate-alt]').forEach((el) => {
        const key = el.getAttribute('data-translate-alt');
        if (!key) return;
        const val = t(key);
        if (val != null) el.setAttribute('alt', val);
    });
    document.querySelectorAll('[data-translate-title]').forEach((el) => {
        const key = el.getAttribute('data-translate-title');
        if (!key) return;
        const val = t(key);
        if (val != null) el.setAttribute('title', val);
    });
    document.querySelectorAll('[data-translate-aria]').forEach((el) => {
        const key = el.getAttribute('data-translate-aria');
        if (!key) return;
        const val = t(key);
        if (val != null) el.setAttribute('aria-label', val);
    });
}

window.addEventListener('DOMContentLoaded', () => {
    try { console.debug('[i18n] DOMContentLoaded'); } catch {}
    const saved = localStorage.getItem('preferredLanguage') || 'es';
    currentLanguage = saved;
    updateMetaForLang(saved);
        dispatchLangChange(saved);
        // Hidratar por si el navegador no reacciona a Custom Elements
        hydrateAll();
    // Expose API
        // ya expuesto arriba
    // DelegaciÃ³n de clics por si los onclick inline son bloqueados
    document.addEventListener('click', (ev) => {
        const btn = ev.target && ev.target.closest ? ev.target.closest('.lang-btn') : null;
        if (btn) {
            const lang = btn.getAttribute('data-lang');
            if (lang) changeLanguage(lang);
        }
    });
});
